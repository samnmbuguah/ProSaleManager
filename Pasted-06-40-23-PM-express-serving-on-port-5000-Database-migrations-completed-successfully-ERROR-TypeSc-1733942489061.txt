06:40:23 PM [express] serving on port 5000
Database migrations completed successfully

 ERROR(TypeScript)  Property 'productId' does not exist on type '{ unit_type: string; quantity: number; buying_price: string; selling_price: string; product_id: number; is_default: boolean; }'. Did you mean 'product_id'?
 FILE  /home/runner/ProSaleManager/server/routes.ts:946:29

    944 |
    945 |       await db.insert(unitPricing).values(unitPricingData.map(pricing => ({
  > 946 |         product_id: pricing.productId,
        |                             ^^^^^^^^^
    947 |         unit_type: pricing.unit_type,
    948 |         quantity: pricing.quantity,
    949 |         buying_price: pricing.buying_price,

 ERROR(TypeScript)  Property 'isDefault' does not exist on type '{ unit_type: string; quantity: number; buying_price: string; selling_price: string; product_id: number; is_default: boolean; }'. Did you mean 'is_default'?
 FILE  /home/runner/ProSaleManager/server/routes.ts:951:29

    949 |         buying_price: pricing.buying_price,
    950 |         selling_price: pricing.selling_price,
  > 951 |         is_default: pricing.isDefault,
        |                             ^^^^^^^^^
    952 |       })));
    953 |       
    954 |       // Update default unit pricing IDs

 ERROR(TypeScript)  No overload matches this call.
  Overload 1 of 2, '(value: { buying_price: string | SQL<unknown> | Placeholder<string, any>; selling_price: string | SQL<unknown> | Placeholder<string, any>; name: string | SQL<...> | Placeholder<...>; ... 9 more ...; default_unit_pricing_id?: number | ... 3 more ... | undefined; }): PgInsertBase<...>', gave the following error.
    Argument of type '{ name: string; sku: string; category: string; stock: number; min_stock: number | undefined; max_stock: number | undefined; reorder_point: number | undefined; stock_unit: "per_piece" | "three_piece" | "dozen"; default_unit_pricing_id: null; }' is not assignable to parameter of type '{ buying_price: string | SQL<unknown> | Placeholder<string, any>; selling_price: string | SQL<unknown> | Placeholder<string, any>; name: string | SQL<unknown> | Placeholder<...>; ... 9 more ...; default_unit_pricing_id?: number | ... 3 more ... | undefined; }'.
      Type '{ name: string; sku: string; category: string; stock: number; min_stock: number | undefined; max_stock: number | undefined; reorder_point: number | undefined; stock_unit: "per_piece" | "three_piece" | "dozen"; default_unit_pricing_id: null; }' is missing the following properties from type '{ buying_price: string | SQL<unknown> | Placeholder<string, any>; selling_price: string | SQL<unknown> | Placeholder<string, any>; name: string | SQL<unknown> | Placeholder<...>; ... 9 more ...; default_unit_pricing_id?: number | ... 3 more ... | undefined; }': buying_price, selling_price
  Overload 2 of 2, '(values: { buying_price: string | SQL<unknown> | Placeholder<string, any>; selling_price: string | SQL<unknown> | Placeholder<string, any>; name: string | SQL<...> | Placeholder<...>; ... 9 more ...; default_unit_pricing_id?: number | ... 3 more ... | undefined; }[]): PgInsertBase<...>', gave the following error.
    Object literal may only specify known properties, and 'name' does not exist in type '{ buying_price: string | SQL<unknown> | Placeholder<string, any>; selling_price: string | SQL<unknown> | Placeholder<string, any>; name: string | SQL<unknown> | Placeholder<...>; ... 9 more ...; default_unit_pricing_id?: number | ... 3 more ... | undefined; }[]'.
 FILE  /home/runner/ProSaleManager/server/routes/products.ts:54:10

    52 |       // Create the product first
    53 |       const [newProduct] = await tx.insert(products)
  > 54 |         .values({
       |          ^^^^^^
    55 |           name: productData.name,
    56 |           sku: productData.sku,
    57 |           category: productData.category,

 ERROR(TypeScript)  Property 'toString' does not exist on type 'never'.
 FILE  /home/runner/ProSaleManager/server/routes/products.ts:212:29

    210 |       const buyingPrice = typeof unit.buying_price === 'string' 
    211 |         ? unit.buying_price 
  > 212 |         : unit.buying_price.toString();
        |                             ^^^^^^^^
    213 |       const sellingPrice = typeof unit.selling_price === 'string'
    214 |         ? unit.selling_price
    215 |         : unit.selling_price.toString();

 ERROR(TypeScript)  Property 'toString' does not exist on type 'never'.
 FILE  /home/runner/ProSaleManager/server/routes/products.ts:215:30

    213 |       const sellingPrice = typeof unit.selling_price === 'string'
    214 |         ? unit.selling_price
  > 215 |         : unit.selling_price.toString();
        |                              ^^^^^^^^
    216 |
    217 |       return {
    218 |         unit_type: unit.unit_type,

 ERROR(TypeScript)  No overload matches this call.
  Overload 1 of 2, '(value: { buying_price: string | SQL<unknown> | Placeholder<string, any>; selling_price: string | SQL<unknown> | Placeholder<string, any>; name: string | SQL<...> | Placeholder<...>; ... 9 more ...; default_unit_pricing_id?: number | ... 3 more ... | undefined; }): PgInsertBase<...>', gave the following error.
    Argument of type '{ name: string; sku: string; category: string; stock: number; min_stock: number; max_stock: number; reorder_point: number; stock_unit: "per_piece" | "three_piece" | "dozen"; default_unit_pricing_id: null; }' is not assignable to parameter of type '{ buying_price: string | SQL<unknown> | Placeholder<string, any>; selling_price: string | SQL<unknown> | Placeholder<string, any>; name: string | SQL<unknown> | Placeholder<...>; ... 9 more ...; default_unit_pricing_id?: number | ... 3 more ... | undefined; }'.
      Type '{ name: string; sku: string; category: string; stock: number; min_stock: number; max_stock: number; reorder_point: number; stock_unit: "per_piece" | "three_piece" | "dozen"; default_unit_pricing_id: null; }' is missing the following properties from type '{ buying_price: string | SQL<unknown> | Placeholder<string, any>; selling_price: string | SQL<unknown> | Placeholder<string, any>; name: string | SQL<unknown> | Placeholder<...>; ... 9 more ...; default_unit_pricing_id?: number | ... 3 more ... | undefined; }': buying_price, selling_price
  Overload 2 of 2, '(values: { buying_price: string | SQL<unknown> | Placeholder<string, any>; selling_price: string | SQL<unknown> | Placeholder<string, any>; name: string | SQL<...> | Placeholder<...>; ... 9 more ...; default_unit_pricing_id?: number | ... 3 more ... | undefined; }[]): PgInsertBase<...>', gave the following error.
    Object literal may only specify known properties, and 'name' does not exist in type '{ buying_price: string | SQL<unknown> | Placeholder<string, any>; selling_price: string | SQL<unknown> | Placeholder<string, any>; name: string | SQL<unknown> | Placeholder<...>; ... 9 more ...; default_unit_pricing_id?: number | ... 3 more ... | undefined; }[]'.
 FILE  /home/runner/ProSaleManager/server/routes/seed.ts:47:12

    45 |         // Step 1: Create product without default unit pricing ID
    46 |         const [newProduct] = await tx.insert(products)
  > 47 |           .values({
       |            ^^^^^^
    48 |             name: productDetails.name,
    49 |             sku: productDetails.sku || generateSKU(productDetails.name),
    50 |             category: productDetails.category,

[TypeScript] Found 6 errors. Watching for file changes.
06:40:57 PM [express] GET /api/products 304 in 174ms :: []
06:40:57 PM [express] GET /api/product-suppliers 304 in 173ms :: []
06:40:57 PM [express] GET /api/purchase-orders 304 in 173ms :: []
06:40:57 PM [express] GET /api/suppliers 304 in 174ms :: [{"id":1,"name":"Samuel Mbugua Nyambura","emâ€¦
Add demo data error: error: null value in column "product_id" of relation "unit_pricing" violates not-null constraint
    at /home/runner/ProSaleManager/node_modules/pg-pool/index.js:45:11
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
    at <anonymous> (/home/runner/ProSaleManager/server/routes.ts:945:7) {
  length: 309,
  severity: 'ERROR',
  code: '23502',
  detail: 'Failing row contains (30, null, per_piece, 1, 120.00, 150.00, f, 2024-12-11 18:41:07.423149, 2024-12-11 18:41:07.423149).',
  hint: undefined,
  position: undefined,
  internalPosition: undefined,
  internalQuery: undefined,
  where: undefined,
  schema: 'public',
  table: 'unit_pricing',
  column: 'product_id',
  dataType: undefined,
  constraint: undefined,
  file: 'execMain.c',
  line: '2011',
  routine: 'ExecConstraints'
}
06:41:07 PM [express] POST /api/seed-demo-data 500 in 756ms :: {"error":"Failed to add demo data"}
