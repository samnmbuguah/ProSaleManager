Starting database initialization...
10:38:49 AM [express] serving on port 5000
Database migrations completed successfully
Database connection verified

 ERROR(TypeScript)  Interface 'ExtendedProduct' incorrectly extends interface 'Product'.
  Type 'ExtendedProduct' is not assignable to type '{ unit_pricing?: { id: number; product_id: number; unit_type: string; quantity: number; buying_price: string | number; selling_price: string | number; is_default: boolean; created_at: Date; updated_at: Date; }[] | undefined; default_unit_pricing?: { ...; } | ... 1 more ... | undefined; price_units?: { ...; }[] | und...'.
    Types of property 'default_unit_pricing' are incompatible.
      Type 'PriceUnit | null | undefined' is not assignable to type '{ id: number; product_id: number; unit_type: string; quantity: number; buying_price: string | number; selling_price: string | number; is_default: boolean; created_at: Date; updated_at: Date; } | null | undefined'.
        Type 'PriceUnit' is missing the following properties from type '{ id: number; product_id: number; unit_type: string; quantity: number; buying_price: string | number; selling_price: string | number; is_default: boolean; created_at: Date; updated_at: Date; }': product_id, created_at, updated_at
 FILE  /home/runner/ProSaleManager/client/src/components/pos/ProductSearch.tsx:18:11

    16 | }
    17 |
  > 18 | interface ExtendedProduct extends Product {
       |           ^^^^^^^^^^^^^^^
    19 |   price_units?: PriceUnit[];
    20 |   default_unit_pricing?: PriceUnit | null;
    21 | }

 ERROR(TypeScript)  Interface 'ExtendedProduct' incorrectly extends interface 'Product'.
  Type 'ExtendedProduct' is not assignable to type '{ unit_pricing?: { id: number; product_id: number; unit_type: string; quantity: number; buying_price: string | number; selling_price: string | number; is_default: boolean; created_at: Date; updated_at: Date; }[] | undefined; default_unit_pricing?: { ...; } | ... 1 more ... | undefined; price_units?: { ...; }[] | und...'.
    Types of property 'price_units' are incompatible.
      Type 'PriceUnit[] | undefined' is not assignable to type '{ unit_type: string; quantity: number; buying_price: string; selling_price: string; is_default: boolean; }[] | undefined'.
        Type 'PriceUnit[]' is not assignable to type '{ unit_type: string; quantity: number; buying_price: string; selling_price: string; is_default: boolean; }[]'.
          Type 'PriceUnit' is not assignable to type '{ unit_type: string; quantity: number; buying_price: string; selling_price: string; is_default: boolean; }'.
            Types of property 'buying_price' are incompatible.
              Type 'string | number' is not assignable to type 'string'.
                Type 'number' is not assignable to type 'string'.
 FILE  /home/runner/ProSaleManager/client/src/pages/PosPage.tsx:21:11

    19 | }
    20 |
  > 21 | interface ExtendedProduct extends Product {
       |           ^^^^^^^^^^^^^^^
    22 |   price_units?: PriceUnit[];
    23 |   default_unit_pricing?: PriceUnit | null;
    24 | }

 ERROR(TypeScript)  Type '{ product_id: string; quantity: string; price: string; name: string; unit_pricing_id: string; }[]' is not assignable to type 'SaleItem[]'.
  Type '{ product_id: string; quantity: string; price: string; name: string; unit_pricing_id: string; }' is not assignable to type 'SaleItem'.
    Types of property 'product_id' are incompatible.
      Type 'string' is not assignable to type 'number'.
 FILE  /home/runner/ProSaleManager/client/src/pages/PosPage.tsx:139:9

    137 |       const total = cartItems.reduce((sum, item) => sum + item.total, 0);
    138 |       const saleData: SaleData = {
  > 139 |         items: saleItems,
        |         ^^^^^
    140 |         total: total.toString(),
    141 |         paymentMethod: 'cash',
    142 |         paymentStatus: 'paid',

 ERROR(TypeScript)  Type 'Product[]' is not assignable to type 'ExtendedProduct[]'.
  Type 'Product' is not assignable to type 'ExtendedProduct'.
    Types of property 'default_unit_pricing' are incompatible.
      Type '{ id: number; product_id: number; unit_type: string; quantity: number; buying_price: string | number; selling_price: string | number; is_default: boolean; created_at: Date; updated_at: Date; } | null | undefined' is not assignable to type 'PriceUnit | null | undefined'.
        Type '{ id: number; product_id: number; unit_type: string; quantity: number; buying_price: string | number; selling_price: string | number; is_default: boolean; created_at: Date; updated_at: Date; }' is not assignable to type 'PriceUnit'.
          Types of property 'selling_price' are incompatible.
            Type 'string | number' is not assignable to type 'string'.
              Type 'number' is not assignable to type 'string'.
 FILE  /home/runner/ProSaleManager/client/src/pages/PosPage.tsx:161:13

    159 |         <SaleTerminal>
    160 |           <ProductSearch
  > 161 |             products={products || []}
        |             ^^^^^^^^
    162 |             onSelect={handleAddToCart}
    163 |             searchProducts={searchProducts}
    164 |           />

 ERROR(TypeScript)  Type '(product: ExtendedProduct, selectedUnit: string) => void' is not assignable to type '(product: ExtendedProduct, selectedUnit: string) => void'. Two different types with this name exist, but they are unrelated.
  Types of parameters 'product' and 'product' are incompatible.
    Type 'ExtendedProduct' is not assignable to type 'ExtendedProduct'. Two different types with this name exist, but they are unrelated.
      Types of property 'price_units' are incompatible.
        Type 'PriceUnit[] | undefined' is not assignable to type 'PriceUnit[] | undefined'. Two different types with this name exist, but they are unrelated.
          Type 'PriceUnit[]' is not assignable to type 'PriceUnit[]'. Two different types with this name exist, but they are unrelated.
            Type 'PriceUnit' is missing the following properties from type 'PriceUnit': product_id, created_at, updated_at
 FILE  /home/runner/ProSaleManager/client/src/pages/PosPage.tsx:162:13

    160 |           <ProductSearch
    161 |             products={products || []}
  > 162 |             onSelect={handleAddToCart}
        |             ^^^^^^^^
    163 |             searchProducts={searchProducts}
    164 |           />
    165 |         </SaleTerminal>

 ERROR(TypeScript)  Type 'CartItem[]' is not assignable to type 'CartItem[]'. Two different types with this name exist, but they are unrelated.
  Property 'priceUnits' is missing in type 'CartItem' but required in type 'CartItem'.
 FILE  /home/runner/ProSaleManager/client/src/pages/PosPage.tsx:170:11

    168 |       <div className="bg-card rounded-lg border p-4">
    169 |         <Cart
  > 170 |           items={cartItems}
        |           ^^^^^
    171 |           onUpdateQuantity={handleUpdateQuantity}
    172 |           onCheckout={handleCheckout}
    173 |           total={cartItems.reduce((sum, item) => sum + item.total, 0)}

 ERROR(TypeScript)  Type 'CartItem[]' is not assignable to type 'CartItem[]'. Two different types with this name exist, but they are unrelated.
  Property 'priceUnits' is missing in type 'CartItem' but required in type 'CartItem'.
 FILE  /home/runner/ProSaleManager/client/src/pages/PosPage.tsx:180:9

    178 |         isOpen={isPaymentOpen}
    179 |         onClose={() => setIsPaymentOpen(false)}
  > 180 |         cartItems={cartItems}
        |         ^^^^^^^^^
    181 |         onProcessPayment={handlePaymentComplete}
    182 |       />
    183 |     </div>

 ERROR(TypeScript)  Type '(paymentDetails: {    amountPaid: number;    change: number;    items: CartItem[];}) => Promise<void>' is not assignable to type '(paymentDetails: { amountPaid: number; change: number; items: CartItem[]; }) => Promise<void>'.
  Types of parameters 'paymentDetails' and 'paymentDetails' are incompatible.
    Type '{ amountPaid: number; change: number; items: CartItem[]; }' is not assignable to type '{ amountPaid: number; change: number; items: CartItem[]; }'. Two different types with this name exist, but they are unrelated.
      Types of property 'items' are incompatible.
        Type 'CartItem[]' is not assignable to type 'CartItem[]'. Two different types with this name exist, but they are unrelated.
          Property 'price_units' is missing in type 'CartItem' but required in type 'CartItem'.
 FILE  /home/runner/ProSaleManager/client/src/pages/PosPage.tsx:181:9

    179 |         onClose={() => setIsPaymentOpen(false)}
    180 |         cartItems={cartItems}
  > 181 |         onProcessPayment={handlePaymentComplete}
        |         ^^^^^^^^^^^^^^^^
    182 |       />
    183 |     </div>
    184 |   );

 ERROR(TypeScript)  No overload matches this call.
  Overload 1 of 2, '(value: { quantity: number | SQL<unknown> | Placeholder<string, any>; productId: number | SQL<unknown> | Placeholder<string, any>; saleId: number | SQL<unknown> | Placeholder<...>; ... 4 more ...; unitPricingId?: number | ... 3 more ... | undefined; }): PgInsertBase<...>', gave the following error.
    Argument of type '{ saleId: number; productId: number; quantity: number; price: number; unitPricingId: number | null; }[]' is not assignable to parameter of type '{ quantity: number | SQL<unknown> | Placeholder<string, any>; productId: number | SQL<unknown> | Placeholder<string, any>; saleId: number | SQL<unknown> | Placeholder<...>; ... 4 more ...; unitPricingId?: number | ... 3 more ... | undefined; }'.
      Type '{ saleId: number; productId: number; quantity: number; price: number; unitPricingId: number | null; }[]' is missing the following properties from type '{ quantity: number | SQL<unknown> | Placeholder<string, any>; productId: number | SQL<unknown> | Placeholder<string, any>; saleId: number | SQL<unknown> | Placeholder<...>; ... 4 more ...; unitPricingId?: number | ... 3 more ... | undefined; }': quantity, productId, saleId, price
  Overload 2 of 2, '(values: { quantity: number | SQL<unknown> | Placeholder<string, any>; productId: number | SQL<unknown> | Placeholder<string, any>; saleId: number | SQL<unknown> | Placeholder<...>; ... 4 more ...; unitPricingId?: number | ... 3 more ... | undefined; }[]): PgInsertBase<...>', gave the following error.
    Argument of type '{ saleId: number; productId: number; quantity: number; price: number; unitPricingId: number | null; }[]' is not assignable to parameter of type '{ quantity: number | SQL<unknown> | Placeholder<string, any>; productId: number | SQL<unknown> | Placeholder<string, any>; saleId: number | SQL<unknown> | Placeholder<...>; ... 4 more ...; unitPricingId?: number | ... 3 more ... | undefined; }[]'.
      Type '{ saleId: number; productId: number; quantity: number; price: number; unitPricingId: number | null; }' is not assignable to type '{ quantity: number | SQL<unknown> | Placeholder<string, any>; productId: number | SQL<unknown> | Placeholder<string, any>; saleId: number | SQL<unknown> | Placeholder<...>; ... 4 more ...; unitPricingId?: number | ... 3 more ... | undefined; }'.
        Types of property 'price' are incompatible.
          Type 'number' is not assignable to type 'string | SQL<unknown> | Placeholder<string, any>'.
 FILE  /home/runner/ProSaleManager/server/routes/sales.ts:150:41

    148 |       }));
    149 |
  > 150 |       await db.insert(saleItems).values(saleItemsData);
        |                                         ^^^^^^^^^^^^^
    151 |
    152 |     // Get product details for receipt
    153 |     const productDetails = await Promise.all(

[TypeScript] Found 9 errors. Watching for file changes.
Fetching products with pricing information...
Found 3 products
Fetching pricing for product 83
Fetching pricing for product 82
Fetching pricing for product 84
Found pricing: [
  {
    id: 91,
    unit_type: 'per_piece',
    quantity: 1,
    buying_price: '200.00',
    selling_price: '250.00',
    is_default: true
  },
  {
    id: 92,
    unit_type: 'three_piece',
    quantity: 3,
    buying_price: '540.00',
    selling_price: '675.00',
    is_default: false
  },
  {
    id: 93,
    unit_type: 'dozen',
    quantity: 12,
    buying_price: '2040.00',
    selling_price: '2550.00',
    is_default: false
  }
]
Found 3 price units for product 83
10:39:58 AM [express] GET /api/product-suppliers 304 in 174ms :: []
10:39:58 AM [express] GET /api/suppliers 304 in 173ms :: [{"id":1,"name":"Samuel Mbugua Nyambura","em…
10:39:58 AM [express] GET /api/purchase-orders 304 in 173ms :: []
Found pricing: [
  {
    id: 88,
    unit_type: 'per_piece',
    quantity: 1,
    buying_price: '120.00',
    selling_price: '150.00',
    is_default: true
  },
  {
    id: 89,
    unit_type: 'three_piece',
    quantity: 3,
    buying_price: '324.00',
    selling_price: '405.00',
    is_default: false
  },
  {
    id: 90,
    unit_type: 'dozen',
    quantity: 12,
    buying_price: '1224.00',
    selling_price: '1530.00',
    is_default: false
  }
]
Found 3 price units for product 82
Found pricing: [
  {
    id: 94,
    unit_type: 'per_piece',
    quantity: 1,
    buying_price: '150.00',
    selling_price: '180.00',
    is_default: true
  },
  {
    id: 95,
    unit_type: 'three_piece',
    quantity: 3,
    buying_price: '405.00',
    selling_price: '486.00',
    is_default: false
  },
  {
    id: 96,
    unit_type: 'dozen',
    quantity: 12,
    buying_price: '1530.00',
    selling_price: '1836.00',
    is_default: false
  }
]
Found 3 price units for product 84
10:39:58 AM [express] GET /api/products 304 in 699ms :: [{"id":83,"name":"Cooking Oil","stock":50,"ca…
